N=window.N||{},N.editor=function(){function a(){b(),c(),N.getFirstVisit()?e(N.getCurrId()):d(N.getCurrId())}function b(){g=document.querySelector(".note-header"),h=document.querySelector(".note-body")}function c(){g.onkeyup=function(){e(N.getCurrId()),N.list.loadState()},g.onkeydown=function(a){13===a.keyCode&&(a.preventDefault(),h.focus())},h.onkeyup=function(){e(N.getCurrId())}}function d(a){g.innerHTML=i["h_"+a],h.innerHTML=i["b_"+a]}function e(a){i["h_"+a]=g.innerHTML,i["b_"+a]=h.innerHTML}function f(){h.focus()}var g,h,i=localStorage;return{init:a,loadState:d,initNote:f}}(),N=window.N||{},N.list=function(){function a(){b(),c(),d()}function b(){f=document.querySelector(".list"),g=f.querySelector(".list-items"),h=f.querySelector(".list-create"),i=document.querySelector(".delete")}function c(){h.onclick=function(){var a=Math.max.apply(null,j.all_notes.split(","))+1,b=e(a,"New note");g.appendChild(b),j.all_notes+=","+a,N.addNote(a),N.setCurrId(a),N.editor.loadState(a),N.editor.initNote(),b.click()},i.onclick=function(){confirm("Are you sure to delete note?")&&N.deleteNote(N.getCurrId())}}function d(){for(var a=j.all_notes.split(","),b=a.length,c=N.getCurrId();g.firstChild;)g.removeChild(g.firstChild);for(var d=0;b>d;d++)a[d]!=c?g.appendChild(e(a[d],N.getNote(a[d],!0))):g.appendChild(e(a[d],N.getNote(a[d],!0),!0))}function e(a,b,c){var d=document.createElement("a");document.createElement("div");return d.href="#"+a,d.dataset.id=a,c&&(d.className="curr"),d.innerHTML=b,d}var f,g,h,i,j=localStorage;return{init:a,loadState:d}}(),N=window.N||{},N=function(){function a(){"firstVisit"in h?h.firstVisit=!1:(h.firstVisit=!0,h.curr_id=1,h.all_notes="1")}function b(){return"true"===h.firstVisit}function c(){return+h.curr_id}function d(a){return h.curr_id=+a}function e(a,b){return b?h["h_"+a]:{head:h["h_"+a],body:h["b_"+a]}}function f(a){h["h_"+a]="New note",h["b_"+a]=""}function g(a){var b,c,d;delete h["h_"+a],delete h["b_"+a],c=h.all_notes.split(","),b=c.indexOf(a+""),c.splice(b,1),h.all_notes=c.join(","),d=document.querySelectorAll('[data-id="'+a+'"]')[0],d.parentNode.removeChild(d),N.editor.loadState(1)}var h=localStorage;return{init:a,getFirstVisit:b,getCurrId:c,setCurrId:d,getNote:e,addNote:f,deleteNote:g}}(),N=window.N||{},N.router=function(){function a(){"onhashchange"in window&&(window.onhashchange=function(){b()}),b()}function b(){c=window.location.hash.substr(1),c&&localStorage.all_notes&&-1!==localStorage.all_notes.split(",").indexOf(c)?(N.setCurrId(c),N.editor.loadState(c),N.list.loadState()):(window.location.hash="",N.setCurrId(1))}var c;localStorage;return{init:a}}(),N=window.N||{},N.ui=void 0,N=window.N||{},N.utils=function(){function a(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}return{supportHTMLStorage:a}}();